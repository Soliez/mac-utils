#!/bin/bashload_dotenv(){    if ! [ -f ".env" ]; then        printf 'No .env file was found in the current working directory\n\nPlease create this file with "touch .env" and configure your environment before trying again.'        exit 1    else        source ".env"    fi}rh_upload(){    local RH_WF_PATH="$1"    local RH_WF_NAME="$2"        if [ -z "$RH_API_KEY" ] || [ -z "$RH_API_URL" ]; then        printf "ERROR: API Key or API URL is not set. Please check your .env file.\n"        exit 1    fi        curl --location --request POST "$RH_API_URL" \        --form "shortcut_name=${RH_WF_NAME}" \        --form "shortcut_file=@${RH_WF_PATH}" \        --form "api_key=${RH_API_KEY}"}show_usage(){    lines=(        "HUBSIGN(1)             mac-utils Repository Manual"        ""        "NAME"        "   hubsign - Sign your shortcuts and upload them to RoutineHub"        ""        "DESCRIPTION"        "   hubsign lets you sign your shortcuts cryptographically before uploading them to RoutineHub using RoutineHub's HubSign Shortcut Signer API"        ""        "SYNOPSIS"        "   hubsign [-h, --help] <path-to-shortcut-file>"        ""        "   The following options are supported"        ""        "    -h, --help            Show this help message"        ""        "PROJECT"        "    This script is from the mac-utils repo on GitHub."        "    mac-utils is a collection of useful (mostly macOS specific) shell and python scripts."        ""        "    GitHub: https://github.com/Soliez/mac-utils"        "\n"    )    printf "%s\n" "${lines[@]}" | less}if [ "$1" == "-h" ] || [ "$1" == "--help" ]; then    show_usage    exit 0fiif [ $# -lt 1 ]; then    show_usage    exit 1fiRH_WF_PATH="$1"if [ -f "$RH_WF_PATH" ]; then    if ! [ "${RH_WF_PATH##*.}" == "shortcut" ]; then        printf 'ERROR: The path provided does not appear to point to a valid Shortcut file (ext: .shortcut)\n'        exit 1    fi    RH_WF_NAME="${RH_WF_PATH%.*}"else    printf 'ERROR: No valid shortcut file (.shortcut) exists at the provided path\n\tInput: %s\n' "$RH_WF_PATH"    exit 1fiprintf 'Signing and uploading your shortcut to RoutineHub ...\n\tShortcut Name: %s\n\tShortcut File: %s\n' "$RH_WF_NAME" "$RH_WF_PATH"load_dotenvrh_upload "$RH_WF_PATH" "$RH_WF_NAME"was_successful="$?"unset RH_API_KEY RH_API_URL RH_WF_PATHif [ "$was_successful" -ne 0 ]; then    printf "ERROR: Unable to contact RoutineHub's HubSigner API\n"    unset RH_WF_NAME    exit 1else    printf 'Your shortcut "%s" was signed and uploaded successfully\n' "$RH_WF_NAME"    unset RH_WF_NAME    exit 0fi